div.card.event-full-form(keep-scroll-position)
  .card-header
    .row
      .col-xs-8
        h1 #{__('Create a new event')}
      .col-xs-4
          button.btn.btn-primary(type='button')
            | #{__('Create')}
          button.btn.btn-default(type='button')
            | #{__('Cancel')}

  .card-body.card-padding
    form(role="form", aria-hidden="true", ng-class="{ 'readonly': !isOrganizer }", ng-submit='submit()')
      .row
        .col-xs-6
          .row
            .form-group
              .fg-line
                input.input.title.form-control(type="text", ng-model='editedEvent.title', maxlength="{{::EVENT_FORM.title.maxlength}}", placeholder="#{__('Title')}", ng-readonly="!isOrganizer")
          .row
            .col-xs-3.col-sm-2
              .form-group
                .fg-line
                  i.mdi.mdi-calendar
            .col-xs-9.col-sm-3
              .form-group
                .fg-line
                  input.input.form-control(type="text", size="10", ng-model="editedEvent.start", data-autoclose="1", data-min-date="today", data-start-week="1", data-date-format="yyyy/MM/dd", placeholder="#{__('Start date')}", ng-change="onStartDateChange()", ng-blur="focusSubmitButton()", bs-datepicker, aria-expanded="false", ng-disabled="!isOrganizer", date-to-moment)
                .fg-line(ng-if='!editedEvent.allDay')
                  input.input.form-control(type="text", size="10", ng-model="editedEvent.start", data-autoclose="1", placeholder="#{__('Time')}", ng-change="onStartDateChange()", ng-blur="focusSubmitButton()", bs-timepicker, aria-expanded="false", ng-disabled="!isOrganizer", date-to-moment)
            .col-xs-3.col-sm-2
              .form-group
                .fg-line
                  i.mdi.mdi-arrow-right
            .col-xs-9.col-sm-3
              .form-group
                .fg-line
                  input.input.form-control(type="text", size="10", class="form-control", ng-model="editedEvent.end", data-autoclose="1", data-min-date="{{getMinDate()}}", data-start-week="1", data-date-format="yyyy/MM/dd", placeholder="#{__('End date')}", ng-change="onEndDateChange()", aria-expanded="false", ng-disabled="!isOrganizer", ng-blur="focusSubmitButton()", bs-datepicker, date-to-moment, friendlify-end-date)
                .fg-line(ng-if='!editedEvent.allDay')
                  input.input(type="text", size="10", class="form-control", ng-model="editedEvent.end", data-autoclose="1", data-min-time="{{getMinTime()}}", placeholder="#{__('Time')}", ng-change="onEndDateChange()", aria-expanded="false", ng-disabled="!isOrganizer", ng-blur="focusSubmitButton()", bs-timepicker, date-to-moment)
            .col-xs-12.col-sm-2
              .form-group
                .fg-line
                  .checkbox
                    label
                      input(type="checkbox", ng-model='editedEvent.allDay', ng-disabled="!isOrganizer", ng-change="focusSubmitButton()")
                      i.input-helper #{__('All day')}
          .row
            .col-xs-12
              .form-group
                .input-group
                  span.input-group-addon
                    i.mdi.mdi-map-marker
                  .fg-line
                    input.input.form-control(type="text", ng-model='editedEvent.location', placeholder="#{__('Location')}")

        .col-xs-6
          .row
            .col-xs-12
              .form-group(ng-show='isOrganizer || isNew(editedEvent)')
                .input-group
                  span.input-group-addon
                    i.mdi.mdi-account-multiple-plus
                  .fg-line
                    tags-input(ng-model='newAttendees', display-property='displayName', key-property='email', placeholder='#{__("Attendees")}', on-tag-adding='onAddingAttendee($tag)', replace-spaces-with-dashes='false')
                      auto-complete(source='getInvitableAttendees($query)', min-length='1', debounce-delay='200', template="/views/modules/auto-complete/user-auto-complete")

            .attendees-list.picture-list
              .col-xs-12
                div(ng-if='attendeesPerPartstat.ACCEPTED > 0')
                  .fg-line.accepted #{__('Accepted')}
                  .fg-line.pl-body(ng-if='attendeesPerPartstat.ACCEPTED > 0')
                    .col-xs-2.col-sm-1(ng-repeat="attendee in editedEvent.attendees | partstat:'ACCEPTED' track by attendee.email")
                      attendee-list-item(attendee='attendee', read-only='::!isOrganizer', ng-click= "selectAttendee(attendee)")
                div(ng-if='attendeesPerPartstat.DECLINED > 0')
                  .fg-line.declined #{__('Declined')}
                  .fg-line.pl-body(ng-if='attendeesPerPartstat.DECLINED > 0')
                    .col-xs-2.col-sm-1(ng-repeat="attendee in editedEvent.attendees | partstat:'DECLINED' track by attendee.email")
                      attendee-list-item(attendee='attendee', read-only='::!isOrganizer', ng-click= "selectAttendee(attendee)")
                div(ng-if='attendeesPerPartstat["NEEDS-ACTION"] > 0 || attendeesPerPartstat["TENTATIVE"] > 0')
                  .fg-line.undecided #{__('Undecided')}
                  .fg-line.pl-body(ng-if='attendeesPerPartstat["NEEDS-ACTION"] > 0 || attendeesPerPartstat["TENTATIVE"] > 0')
                    .col-xs-2.col-sm-1(ng-repeat="attendee in editedEvent.attendees | partstat:'NEEDS-ACTION' track by attendee.email")
                      attendee-list-item(attendee='attendee', read-only='::!isOrganizer', ng-click= "selectAttendee(attendee)")
                    .col-xs-2.col-sm-1(ng-repeat="attendee in editedEvent.attendees | partstat:'TENTATIVE' track by attendee.email")
                      attendee-list-item(attendee='attendee', read-only='::!isOrganizer', ng-click= "selectAttendee(attendee)")
                .trash
                  a(href="")
                    i.mdi.mdi-delete(ng-show='isOrganizer && attendeeClickedCount > 0', ng-click='deleteSelectedAttendees()')
